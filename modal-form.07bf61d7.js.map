{"version":3,"sources":["js/modal-form.js"],"names":["refs","openModalBtn","document","querySelector","closeModalBtn","backdrop","onBackdropClick","event","target","currentTarget","toggleModal","classList","contains","window","removeEventListener","onPressEscape","addEventListener","toggle","code","modalRef","modalFocus","focus","style","outline","checkboxIconRef","checkboxInputRef","checkboxLabelRef","addEventListenerAddChecked","onPressEnterAdd","setAttribute","add","onPressEnterRemove","removeAttribute","remove","byClickChecked","hasAttribute","formModalRef","takeFormData","preventDefault","formRef","formInputArray","querySelectorAll","checked","forEach","input","borderColor","getAttribute","formData","FormData","submittedData","value","key","console","dir","log","modalInputArray","checkedInput","pattern","name","test","outlineColor","_","debounce"],"mappings":";AACE,IAAMA,EAAO,CACXC,aAAcC,SAASC,cAAc,qBACrCC,cAAeF,SAASC,cAAc,sBACtCE,SAAUH,SAASC,cAAc,oBASnC,SAASG,EAAgBC,GACjBA,EAAMC,SAAWD,EAAME,eACzBC,IAIN,SAASA,IACNV,EAAKK,SAASM,UAAUC,SAAS,WAE9BC,OAAOC,oBAAoB,UAAWC,GADtCF,OAAOG,iBAAiB,UAAWD,GAEvCf,EAAKK,SAASM,UAAUM,OAAO,WAGjC,SAASF,EAAcR,GACF,WAAfA,EAAMW,MACRR,IArBAV,EAAKC,eACLD,EAAKC,aAAae,iBAAiB,QAASN,GAC5CV,EAAKI,cAAcY,iBAAiB,QAASN,GAC7CV,EAAKK,SAASW,iBAAiB,QAASV,IAuB5C,IAAMa,EAAWjB,SAASC,cAAc,gBAIxC,SAASiB,IACPD,EAASE,QACTF,EAASG,MAAMC,QAAU,OAJ3BvB,EAAKC,aAAae,iBAAiB,QAASI,GAQ5C,IAAMI,EAAkBtB,SAASC,cAAc,4BACzCsB,EAAmBvB,SAASC,cAAc,yBAC1CuB,EAAmBxB,SAASC,cAAc,yBAMhD,SAASwB,IACPd,OAAOG,iBAAiB,UAAWY,GAGrC,SAASA,EAAgBrB,GAChBA,EAAMC,OAAOG,UAAUC,SAAS,kBAAmC,UAAfL,EAAMW,OAC7DO,EAAiBI,aAAa,UAAW,IACzCL,EAAgBb,UAAUmB,IAAI,WAC9BjB,OAAOC,oBAAoB,UAAWc,GACtCf,OAAOG,iBAAiB,UAAWe,IAIzC,SAASA,EAAmBxB,GACtBA,EAAMC,OAAOG,UAAUC,SAAS,kBAAmC,UAAfL,EAAMW,OAC5DO,EAAiBO,gBAAgB,WACjCR,EAAgBb,UAAUsB,OAAO,WACjCpB,OAAOC,oBAAoB,UAAWiB,GACtCJ,KAIJ,SAASO,EAAe3B,IAClBA,EAAMC,OAAOG,UAAUC,SAAS,wBAChCL,EAAMC,OAAOG,UAAUC,SAAS,oBAC1Ba,EAAiBU,aAAa,YAClCV,EAAiBO,gBAAgB,WACjCR,EAAgBb,UAAUsB,OAAO,WACjCN,MAEAF,EAAiBI,aAAa,UAAW,IACzCL,EAAgBb,UAAUmB,IAAI,WAC9BjB,OAAOG,iBAAiB,UAAWe,KAnC3CL,EAAiBV,iBAAiB,QAASkB,GAC3CV,EAAgBR,iBAAiB,QAASW,KA0C1C,IAAMS,EAAelC,SAASC,cAAc,qBAEtCkC,EAAe,SAAA9B,GACnBA,EAAM+B,iBAEAC,IAAAA,EAAUhC,EAAMC,OAEhBgC,EAAiBD,EAAQE,iBAAiB,SAC5CC,GAAU,EAYV,GAXFF,EAAeG,QAAQ,SAAAC,GACjB,IAACA,EAAMT,aAAa,WAAY,CAE9BS,GADJA,EAAMtB,MAAMuB,YAAc,UACO,aAA7BD,EAAME,aAAa,QACGP,EAAQpC,cAAc,kBAC9BQ,UAAUmB,IAAI,sBAElCY,GAAU,KAITA,EAAD,CAMEK,IAAAA,EAAW,IAAIC,SAAST,GACxBU,EAAgB,GAEtBF,EAASJ,QAAQ,SAACO,EAAOC,GACvBF,EAAcE,GAAOD,IAGvBE,QAAQC,IAAIJ,GACZvC,IACA8B,EAAeG,QAAQ,SAAAC,GACrBA,EAAMM,MAAQ,GACdN,EAAMZ,gBAAgB,aAGxBR,EAAgBb,UAAUsB,OAAO,sBACjCR,EAAiBO,gBAAgB,WACjCR,EAAgBb,UAAUsB,OAAO,WACjCpB,OAAOC,oBAAoB,UAAWiB,GACtCJ,SAvBEyB,QAAQE,IAAI,2BA2BblB,GACDA,EAAapB,iBAAiB,SAAUqB,GAI5C,IAAMkB,EAAkBrD,SAASuC,iBAAiB,2BAE5Ce,EAAe,SAACjD,GAChBkD,IAAAA,EAEsB,SAAtBlD,EAAMC,OAAOkD,OACfD,EAAU,yBAEc,QAAtBlD,EAAMC,OAAOkD,OACfD,EAAU,uBAEc,UAAtBlD,EAAMC,OAAOkD,OACfD,EAAU,2DAGPA,EAAQE,KAAKpD,EAAMC,OAAO0C,QAI7B3C,EAAMC,OAAOc,MAAMsC,aAAe,UAClCrD,EAAMC,OAAOc,MAAMuB,YAAc,wBACjCtC,EAAMC,OAAOqB,aAAa,UAAW,MALrCtB,EAAMC,OAAOc,MAAMsC,aAAe,UAClCrD,EAAMC,OAAOwB,gBAAgB,aASjCuB,EAAgBZ,QAAQ,SAAAC,GAASA,OAAAA,EAAM5B,iBAAiB,QAAS6C,EAAEC,SAASN,EAAc","file":"modal-form.07bf61d7.js","sourceRoot":"../src","sourcesContent":["/* --------MODAL window open/close------------- */\n  const refs = {\n    openModalBtn: document.querySelector(\"[data-modal-open]\"),\n    closeModalBtn: document.querySelector(\"[data-modal-close]\"),\n    backdrop: document.querySelector(\"[data-backdrop]\"),\n  };\n\n  if (refs.openModalBtn) {\n      refs.openModalBtn.addEventListener(\"click\", toggleModal);\n      refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n      refs.backdrop.addEventListener('click', onBackdropClick);\n  };\n\n  function onBackdropClick(event) {\n      if (event.target === event.currentTarget) {\n        toggleModal();\n      };\n  };\n\n  function toggleModal() {\n    !refs.backdrop.classList.contains(\"is-open\")\n      ? window.addEventListener('keydown', onPressEscape)\n      : window.removeEventListener('keydown', onPressEscape);\n    refs.backdrop.classList.toggle(\"is-open\");\n  };\n\n  function onPressEscape(event) {\n    if (event.code === 'Escape') {\n      toggleModal();\n    };\n  };\n\n/* add focus on modal */\n  const modalRef = document.querySelector('[data-modal]');\n\n  refs.openModalBtn.addEventListener('click', modalFocus);\n\n  function modalFocus() {\n    modalRef.focus();\n    modalRef.style.outline = 'none';\n  }\n\n/* CHECKBOX-icon in modal add attribute CHECKED */\n  const checkboxIconRef = document.querySelector('[data-checkbox-icon] svg');\n  const checkboxInputRef = document.querySelector('[data-checkbox-input]');\n  const checkboxLabelRef = document.querySelector('[data-checkbox-label]');\n\n\n  checkboxLabelRef.addEventListener('click', byClickChecked);\n  checkboxIconRef.addEventListener('focus', addEventListenerAddChecked());\n\n  function addEventListenerAddChecked() {\n    window.addEventListener('keydown', onPressEnterAdd);\n  };\n\n  function onPressEnterAdd(event) {\n      if ( event.target.classList.contains('checkbox-icon') && event.code === 'Enter') {\n        checkboxInputRef.setAttribute('checked', '');\n        checkboxIconRef.classList.add('checked');\n        window.removeEventListener('keydown', onPressEnterAdd);\n        window.addEventListener('keydown', onPressEnterRemove);\n      }\n  };\n\n  function onPressEnterRemove(event) {\n    if (event.target.classList.contains('checkbox-icon') && event.code === 'Enter') {\n      checkboxInputRef.removeAttribute('checked');\n      checkboxIconRef.classList.remove('checked');\n      window.removeEventListener('keydown', onPressEnterRemove);\n      addEventListenerAddChecked();\n    }\n  };\n\n  function byClickChecked(event) {\n    if (event.target.classList.contains('form__text-checkbox') ||\n        event.target.classList.contains('checkbox-icon')) {\n          if (checkboxInputRef.hasAttribute('checked')) {\n          checkboxInputRef.removeAttribute('checked');\n          checkboxIconRef.classList.remove('checked');\n          addEventListenerAddChecked();\n          } else {\n          checkboxInputRef.setAttribute('checked', '');\n          checkboxIconRef.classList.add('checked');\n          window.addEventListener('keydown', onPressEnterRemove);\n          };\n    };\n  };\n\n/* ========================================= */\n\n/* --------FORM in modal window------------- */\n  const formModalRef = document.querySelector('[data-form-modal]');\n\n  const takeFormData = event => {\n    event.preventDefault();//забороняє браузеру відправляти форму при натисканні кнопки\n    // console.dir(event.target.elements); //так можна отримати доступ до елементів форми\n    const formRef = event.target;// тут міститься посилання на форму\n    /* -------------- */\n    const formInputArray = formRef.querySelectorAll('input');\n    let checked = true;\n      formInputArray.forEach(input => {\n        if (!input.hasAttribute('checked')) {\n          input.style.borderColor = '#d41443';\n          if (input.getAttribute('type')==='checkbox') {\n            const checkboxIconRef = formRef.querySelector('.checkbox-icon');\n            checkboxIconRef.classList.add('border-not-checked');\n          };\n        checked = false;\n      }\n    });\n\n    if (!checked) {\n      console.log('not all inputs checked');\n      return;\n    };\n\n    /* -------------- */\n    const formData = new FormData(formRef);//створюємо новий об'єкт\n    const submittedData = {};//об'єкт для збору даних з форми, який надішлеться на бекенд\n\n    formData.forEach((value, key) => {//цей об'єкт просто має ф-цію форіч і дані інпутів у вигляді value та key = name інпута\n      submittedData[key] = value;//записуємо дані в об'єкт\n    });\n\n    console.dir(submittedData); //показує в консолі обєкт з даними\n    toggleModal();// закриває форму\n    formInputArray.forEach(input => {\n      input.value = '';\n      input.removeAttribute('checked');\n    });\n    /* --------видаляю все з чекбокса----------- */\n    checkboxIconRef.classList.remove('border-not-checked');\n    checkboxInputRef.removeAttribute('checked');\n    checkboxIconRef.classList.remove('checked');\n    window.removeEventListener('keydown', onPressEnterRemove);\n    addEventListenerAddChecked();\n    /* --------кінець видаляю все з чекбокса----------- */\n  };\n\n  if(formModalRef){\n    formModalRef.addEventListener('submit', takeFormData);\n  };\n/* --------------------- */\n/* ---------перевірка заповнення INPUT в модалці------------ */\nconst modalInputArray = document.querySelectorAll('[data-form-modal] input');\n\nconst checkedInput = (event) => {\n  let pattern;\n\n  if (event.target.name === \"name\") {\n    pattern = /^[a-zA-ZА-Яа-яЁё\\s]+$/;\n  }\n  if (event.target.name === \"tel\") {\n    pattern = /^[0-9]{9,12}(\\s*)?$/;\n  }\n  if (event.target.name === \"email\") {\n    pattern = /^([a-z0-9_\\.-])+@[a-z0-9-]+\\.([a-z]{2,4}\\.)?[a-z]{2,4}$/;\n  }\n\n  if (!pattern.test(event.target.value)) {\n    event.target.style.outlineColor = '#d41443';\n    event.target.removeAttribute('checked');\n    } else {\n    event.target.style.outlineColor = 'inherit';\n    event.target.style.borderColor = 'rgba(33, 33, 33, 0.2)';\n    event.target.setAttribute('checked', '');\n    }\n\n};\n\nmodalInputArray.forEach(input => input.addEventListener('input', _.debounce(checkedInput, 500)));"]}