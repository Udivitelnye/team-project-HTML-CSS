{"version":3,"sources":["js/modal-form.js"],"names":["refs","openModalBtn","document","querySelector","closeModalBtn","backdrop","addEventListener","toggleModal","onBackdropClick","event","target","currentTarget","classList","contains","window","onPressEscape","removeEventListener","toggle","code","modalRef","modalFocus","focus","style","outline","checkboxIconRef","checkboxInputRef","checkboxLabelRef","byClickChecked","addEventListenerAddChecked","onPressEnterAdd","setAttribute","add","onPressEnterRemove","removeAttribute","remove","hasAttribute","formModalRef","takeFormData","preventDefault","formRef","formInputArray","querySelectorAll","checked","forEach","input","borderColor","getAttribute","console","log","formData","FormData","submittedData","value","key","dir","modalInputArray","checkedInput","pattern","name","test","outlineColor","_","debounce"],"mappings":"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","file":"modal-form.40274c32.js","sourceRoot":"../src","sourcesContent":["/* --------MODAL window open/close------------- */\n  const refs = {\n    openModalBtn: document.querySelector(\"[data-modal-open]\"),\n    closeModalBtn: document.querySelector(\"[data-modal-close]\"),\n    backdrop: document.querySelector(\"[data-backdrop]\"),\n  };\n\n  if (refs.openModalBtn) {\n      refs.openModalBtn.addEventListener(\"click\", toggleModal);\n      refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n      refs.backdrop.addEventListener('click', onBackdropClick);\n  };\n\n  function onBackdropClick(event) {\n      if (event.target === event.currentTarget) {\n        toggleModal();\n      };\n  };\n\n  function toggleModal() {\n    !refs.backdrop.classList.contains(\"is-open\")\n      ? window.addEventListener('keydown', onPressEscape)\n      : window.removeEventListener('keydown', onPressEscape);\n    refs.backdrop.classList.toggle(\"is-open\");\n  };\n\n  function onPressEscape(event) {\n    if (event.code === 'Escape') {\n      toggleModal();\n    };\n  };\n\n/* add focus on modal */\n  const modalRef = document.querySelector('[data-modal]');\n\n  refs.openModalBtn.addEventListener('click', modalFocus);\n\n  function modalFocus() {\n    modalRef.focus();\n    modalRef.style.outline = 'none';\n  }\n\n/* CHECKBOX-icon in modal add attribute CHECKED */\n  const checkboxIconRef = document.querySelector('[data-checkbox-icon] svg');\n  const checkboxInputRef = document.querySelector('[data-checkbox-input]');\n  const checkboxLabelRef = document.querySelector('[data-checkbox-label]');\n\n\n  checkboxLabelRef.addEventListener('click', byClickChecked);\n  checkboxIconRef.addEventListener('focus', addEventListenerAddChecked());\n\n  function addEventListenerAddChecked() {\n    window.addEventListener('keydown', onPressEnterAdd);\n  };\n\n  function onPressEnterAdd(event) {\n      if ( event.target.classList.contains('checkbox-icon') && event.code === 'Enter') {\n        checkboxInputRef.setAttribute('checked', '');\n        checkboxIconRef.classList.add('checked');\n        window.removeEventListener('keydown', onPressEnterAdd);\n        window.addEventListener('keydown', onPressEnterRemove);\n      }\n  };\n\n  function onPressEnterRemove(event) {\n    if (event.target.classList.contains('checkbox-icon') && event.code === 'Enter') {\n      checkboxInputRef.removeAttribute('checked');\n      checkboxIconRef.classList.remove('checked');\n      window.removeEventListener('keydown', onPressEnterRemove);\n      addEventListenerAddChecked();\n    }\n  };\n\n  function byClickChecked(event) {\n    if (event.target.classList.contains('form__text-checkbox') ||\n        event.target.classList.contains('checkbox-icon')) {\n          if (checkboxInputRef.hasAttribute('checked')) {\n          checkboxInputRef.removeAttribute('checked');\n          checkboxIconRef.classList.remove('checked');\n          addEventListenerAddChecked();\n          } else {\n          checkboxInputRef.setAttribute('checked', '');\n          checkboxIconRef.classList.add('checked');\n          window.addEventListener('keydown', onPressEnterRemove);\n          };\n    };\n  };\n\n/* ========================================= */\n\n/* --------FORM in modal window------------- */\n  const formModalRef = document.querySelector('[data-form-modal]');\n\n  const takeFormData = event => {\n    event.preventDefault();//забороняє браузеру відправляти форму при натисканні кнопки\n    // console.dir(event.target.elements); //так можна отримати доступ до елементів форми\n    const formRef = event.target;// тут міститься посилання на форму\n    /* -------------- */\n    const formInputArray = formRef.querySelectorAll('input');\n    let checked = true;\n      formInputArray.forEach(input => {\n        if (!input.hasAttribute('checked')) {\n          input.style.borderColor = '#d41443';\n          if (input.getAttribute('type')==='checkbox') {\n            const checkboxIconRef = formRef.querySelector('.checkbox-icon');\n            checkboxIconRef.classList.add('border-not-checked');\n          };\n        checked = false;\n      }\n    });\n\n    if (!checked) {\n      console.log('not all inputs checked');\n      return;\n    };\n\n    /* -------------- */\n    const formData = new FormData(formRef);//створюємо новий об'єкт\n    const submittedData = {};//об'єкт для збору даних з форми, який надішлеться на бекенд\n\n    formData.forEach((value, key) => {//цей об'єкт просто має ф-цію форіч і дані інпутів у вигляді value та key = name інпута\n      submittedData[key] = value;//записуємо дані в об'єкт\n    });\n\n    console.dir(submittedData); //показує в консолі обєкт з даними\n    toggleModal();// закриває форму\n    formInputArray.forEach(input => {\n      input.value = '';\n      input.removeAttribute('checked');\n    });\n    /* --------видаляю все з чекбокса----------- */\n    checkboxIconRef.classList.remove('border-not-checked');\n    checkboxInputRef.removeAttribute('checked');\n    checkboxIconRef.classList.remove('checked');\n    window.removeEventListener('keydown', onPressEnterRemove);\n    addEventListenerAddChecked();\n    /* --------кінець видаляю все з чекбокса----------- */\n  };\n\n  if(formModalRef){\n    formModalRef.addEventListener('submit', takeFormData);\n  };\n/* --------------------- */\n/* ---------перевірка заповнення INPUT в модалці------------ */\nconst modalInputArray = document.querySelectorAll('[data-form-modal] input');\n\nconst checkedInput = (event) => {\n  let pattern;\n\n  if (event.target.name === \"name\") {\n    pattern = /^[a-zA-ZА-Яа-яЁё\\s]+$/;\n  }\n  if (event.target.name === \"tel\") {\n    pattern = /^[0-9]{9,12}(\\s*)?$/;\n  }\n  if (event.target.name === \"email\") {\n    pattern = /^([a-z0-9_\\.-])+@[a-z0-9-]+\\.([a-z]{2,4}\\.)?[a-z]{2,4}$/;\n  }\n\n  if (!pattern.test(event.target.value)) {\n    event.target.style.outlineColor = '#d41443';\n    event.target.removeAttribute('checked');\n    } else {\n    event.target.style.outlineColor = 'inherit';\n    event.target.style.borderColor = 'rgba(33, 33, 33, 0.2)';\n    event.target.setAttribute('checked', '');\n    }\n\n};\n\nmodalInputArray.forEach(input => input.addEventListener('input', _.debounce(checkedInput, 500)));"]}